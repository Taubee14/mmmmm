# -*- coding: utf-8 -*-
"""
JSON Schema definitions for all tool tree related operations
"""

# Schema for clustering tool nodes
CLUSTER_TOOLS_SCHEMA = {
    "type": "object",
    "additionalProperties": {
        "type": "object",
        "required": ["details", "children"],
        "properties": {
            "details": {
                "type": "string",
                "description": "Description of the tool class, "
                "must clearly and"
                " completely represent the functional coverage of child nodes",
            },
            "children": {
                "type": "array",
                "items": {
                    "type": "string",
                },
                "description": "list: names or identifiers of child nodes",
            },
        },
        "description": "class name",
    },
}

# Schema for node classification
NODE_CLASSIFICATION_SCHEMA = {
    "type": "object",
    "properties": {
        "parent": {
            "type": "string",
            "description": "Name of the most suitable parent node in "
            "the current tool tree",
        },
    },
}

# Schema for searches decisions
SEARCH_DECISION_SCHEMA = {
    "type": "object",
    "properties": {
        "next": {
            "type": "string",
            "enum": ["select_tool", "explore_directory", "back", "end"],
            "description": "Choose next action: select tool, "
            "explore directory, go back, or end searches",
        },
        "selected_node": {
            "type": "string",
            "description": "Name of the selected tool or directory",
        },
        "reason": {
            "type": "string",
            "description": "Reason for the selection",
        },
    },
    "required": ["next", "selected_node", "reason"],
}

# Schema for multi-tool searches decisions
MULTI_TOOL_SEARCH_SCHEMA = {
    "type": "object",
    "properties": {
        "next": {
            "type": "string",
            "enum": ["select_nodes", "back", "end"],
            "description": "Choose next action: select nodes "
            "(tools or directories), go back, or end searches",
        },
        "selected_nodes": {
            "type": "array",
            "items": {
                "type": "string",
            },
            "description": "List of selected tools or directories, "
            "tools will be added to results, "
            "directories will continue to be searched",
        },
        "reason": {
            "type": "string",
            "description": "Reason for the selection",
        },
    },
    "required": ["next", "reason"],
}

# Schema for directory selection
DIRECTORY_SELECTION_SCHEMA = {
    "type": "object",
    "properties": {
        "selected_directory": {
            "type": "string",
            "description": "Name of the selected directory",
        },
        "reason": {
            "type": "string",
            "description": "Reason for the selection",
        },
    },
    "required": ["selected_directory", "reason"],
}

# Schema for tree merge decisions
MERGE_DECISION_SCHEMA = {
    "type": "object",
    "properties": {
        "action": {
            "type": "string",
            "enum": ["merge_with_child", "create_new_group", "restructure"],
            "description": "Decide which merge action to take",
        },
        "target_child": {
            "type": "string",
            "description": "If choosing merge_with_child, "
            "specify the name of the target child node",
        },
        "new_group_name": {
            "type": "string",
            "description": "If choosing create_new_group,"
            " provide the name of the new group",
        },
        "new_group_description": {
            "type": "string",
            "description": "If choosing create_new_group, "
            "provide the description of the new group",
        },
        "reasoning": {
            "type": "string",
            "description": "Reasoning for the decision",
        },
    },
    "required": ["action", "reasoning"],
}
