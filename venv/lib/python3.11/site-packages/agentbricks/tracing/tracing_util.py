# -*- coding: utf-8 -*-
import contextvars

_user_request_id: contextvars.ContextVar[str] = contextvars.ContextVar(
    "_user_request_id",
    default="",
)

_user_trace_header: contextvars.ContextVar[dict] = contextvars.ContextVar(
    "_user_trace_header",
    default={},
)

_user_common_attributes: contextvars.ContextVar[dict] = contextvars.ContextVar(
    "_user_common_attributes",
    default={},
)


class TracingUtil:
    @staticmethod
    def set_request_id(value: str = "") -> None:
        """Set request id"""
        _user_request_id.set(value)

    @staticmethod
    def get_request_id(default_value: str = "") -> str:
        """Get request id"""
        return _user_request_id.get(default_value)

    @staticmethod
    def set_trace_header(trace_headers: dict) -> None:
        """Set trace headers

        Args:
            trace_headers: trace headers to set
        """
        _user_trace_header.set(trace_headers)

    @staticmethod
    def get_trace_header() -> dict:
        """Get trace headers

        Returns:
            trace headers in dict
        """
        return _user_trace_header.get({})

    @staticmethod
    def set_common_attributes(attributes: dict) -> None:
        """Set common attributes

        Args:
            attributes: common attributes to set
        """
        _user_common_attributes.set(attributes)

    @staticmethod
    def get_common_attributes() -> dict:
        """Get common attributes

        Returns:
            common attributes in dict
        """
        return _user_common_attributes.get({})
